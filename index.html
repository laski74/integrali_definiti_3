<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrali Definiti - Esercitazioni Interattive</title>
    
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$']],
            displayMath: [['$$', '$$']]
        }
    };
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            min-height: 90vh;
        }

        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 30px 20px;
            overflow-y: auto;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            text-align: center;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .menu-item {
            padding: 15px 20px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
            border-left: 4px solid transparent;
        }

        .menu-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
            border-left-color: #ffd700;
        }

        .menu-item.active {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-left-color: #ffd700;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 36px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            color: #4a5568;
            margin: 30px 0 20px 0;
            font-size: 28px;
            border-left: 5px solid #667eea;
            padding-left: 15px;
        }

        .interactive-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .graph-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-height: 400px;
        }

        .formula-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 18px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        input[type="range"] {
            width: 100%;
            margin: 15px 0;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="logo">ðŸ“Š Integrali Definiti</div>
            <div class="menu-item active" onclick="showTab('interattivi')">
                ðŸŽ® Grafici Interattivi
            </div>
        </div>

        <div class="content">
            <!-- TAB: GRAFICI INTERATTIVI -->
            <div id="interattivi" class="tab-content active">
                <h1>ðŸŽ® Grafici Interattivi</h1>

                <div class="interactive-section">
                    <h2>1. Visualizzazione dell'Integrale Definito</h2>
                    <p>Esplora come cambia l'area sotto la curva modificando la funzione e gli estremi di integrazione!</p>
                    
                    <div style="margin: 30px 0;">
                        <label class="slider-label">
                            <span>Estremo superiore (b):</span>
                            <span id="b-value">2.0</span>
                        </label>
                        <input type="range" id="b-slider" min="0.5" max="5" step="0.1" value="2" 
                               oninput="updateInteractiveGraph()">
                        
                        <label class="slider-label" style="margin-top: 20px;">
                            <span>Coefficiente (c):</span>
                            <span id="c-value">1.0</span>
                        </label>
                        <input type="range" id="c-slider" min="0.5" max="3" step="0.1" value="1" 
                               oninput="updateInteractiveGraph()">
                    </div>
                    
                    <div class="graph-container" id="interactive-graph"></div>
                    
                    <div class="formula-box" id="area-display">
                        <h3 style="color: white; margin-bottom: 15px;">Risultato</h3>
                        <p>Muovi gli slider per vedere il calcolo...</p>
                    </div>
                </div>

                <div class="interactive-section">
                    <h2>2. Confronto tra Funzioni</h2>
                    <p>Visualizza l'area tra due curve e come varia cambiando i parametri.</p>
                    
                    <div style="margin: 30px 0;">
                        <label class="slider-label">
                            <span>Parametro k:</span>
                            <span id="k-value">1.0</span>
                        </label>
                        <input type="range" id="k-slider" min="0.5" max="2" step="0.1" value="1" 
                               oninput="updateComparisonGraph()">
                    </div>
                    
                    <div class="graph-container" id="comparison-graph"></div>
                </div>

                <div class="interactive-section">
                    <h2>3. Somme di Riemann</h2>
                    <p>Osserva come le somme di Riemann approssimano l'integrale definito aumentando il numero di rettangoli.</p>
                    
                    <div style="margin: 30px 0;">
                        <label class="slider-label">
                            <span>Numero di rettangoli (n):</span>
                            <span id="n-value">5</span>
                        </label>
                        <input type="range" id="n-slider" min="1" max="50" step="1" value="5" 
                               oninput="updateRiemannGraph()">
                    </div>
                    
                    <div class="graph-container" id="riemann-graph"></div>
                    
                    <div class="formula-box" id="riemann-sum">
                        <h3 style="color: white; margin-bottom: 15px;">Somma di Riemann</h3>
                        <p>Muovi lo slider per vedere l'approssimazione...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Funzione per cambiare tab
        function showTab(tabName) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => item.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'interattivi') {
                setTimeout(initInteractiveGraphs, 100);
            }
        }

        // Grafici Interattivi
        function initInteractiveGraphs() {
            updateInteractiveGraph();
            updateComparisonGraph();
            updateRiemannGraph();
        }

        function updateInteractiveGraph() {
            const b = parseFloat(document.getElementById('b-slider').value);
            const c = parseFloat(document.getElementById('c-slider').value);
            
            document.getElementById('b-value').textContent = b.toFixed(1);
            document.getElementById('c-value').textContent = c.toFixed(1);
            
            const x = [];
            const y = [];
            for (let i = 0; i <= b; i += 0.01) {
                x.push(i);
                y.push(c * i * i);
            }
            
            const trace1 = {
                x: x,
                y: y,
                mode: 'lines',
                name: 'y = ' + c.toFixed(1) + 'xÂ²',
                line: {color: '#667eea', width: 3}
            };
            
            const trace2 = {
                x: x,
                y: y,
                fill: 'tozeroy',
                fillcolor: 'rgba(102, 126, 234, 0.3)',
                line: {color: 'transparent'},
                showlegend: false
            };
            
            const layout = {
                title: 'Integrale di ' + c.toFixed(1) + 'xÂ² da 0 a ' + b.toFixed(1),
                xaxis: {title: 'x', range: [0, 5]},
                yaxis: {title: 'y', range: [0, 25]},
                showlegend: true,
                margin: {t: 50, b: 50, l: 50, r: 50}
            };
            
            Plotly.newPlot('interactive-graph', [trace2, trace1], layout, {responsive: true});
            
            const area = (c * Math.pow(b, 3)) / 3;
            document.getElementById('area-display').innerHTML = 
                '<h3 style="color: white; margin-bottom: 15px;">Risultato</h3>' +
                '<p style="font-size: 20px;">Area = ' + area.toFixed(3) + '</p>' +
                '<p style="font-size: 16px; margin-top: 10px;">Formula: âˆ«â‚€^' + b.toFixed(1) + ' ' + c.toFixed(1) + 'xÂ² dx = [' + c.toFixed(1) + 'xÂ³/3]â‚€^' + b.toFixed(1) + '</p>';
        }

        function updateComparisonGraph() {
            const k = parseFloat(document.getElementById('k-slider').value);
            document.getElementById('k-value').textContent = k.toFixed(1);
            
            const x = [];
            const y1 = [];
            const y2 = [];
            
            for (let i = -2; i <= 3; i += 0.01) {
                x.push(i);
                y1.push(k * i * i);
                y2.push(i + 2);
            }
            
            // Trova intersezioni: kxÂ² = x + 2 â†’ kxÂ² - x - 2 = 0
            const a = k;
            const b = -1;
            const c = -2;
            const discriminant = b*b - 4*a*c;
            
            if (discriminant < 0) {
                // Nessuna intersezione reale
                const trace1 = {
                    x: x,
                    y: y1,
                    mode: 'lines',
                    name: 'y = ' + k.toFixed(1) + 'xÂ²',
                    line: {color: '#667eea', width: 3}
                };
                
                const trace2 = {
                    x: x,
                    y: y2,
                    mode: 'lines',
                    name: 'y = x + 2',
                    line: {color: '#f5576c', width: 3}
                };
                
                const layout = {
                    title: 'Le curve non si intersecano!',
                    xaxis: {title: 'x'},
                    yaxis: {title: 'y'},
                    margin: {t: 50, b: 50, l: 50, r: 50}
                };
                
                Plotly.newPlot('comparison-graph', [trace1, trace2], layout, {responsive: true});
                return;
            }
            
            const x1 = (-b - Math.sqrt(discriminant)) / (2*a);
            const x2 = (-b + Math.sqrt(discriminant)) / (2*a);
            
            const trace1 = {
                x: x,
                y: y1,
                mode: 'lines',
                name: 'y = ' + k.toFixed(1) + 'xÂ²',
                line: {color: '#667eea', width: 3}
            };
            
            const trace2 = {
                x: x,
                y: y2,
                mode: 'lines',
                name: 'y = x + 2',
                line: {color: '#f5576c', width: 3}
            };
            
            // Area tra le curve
            const xFill = [];
            for (let i = x1; i <= x2; i += 0.01) {
                xFill.push(i);
            }
            
            const yFillTop = xFill.map(x => x + 2);
            const yFillBottom = xFill.map(x => k * x * x);
            
            const trace3 = {
                x: [...xFill, ...xFill.slice().reverse()],
                y: [...yFillBottom, ...yFillTop.slice().reverse()],
                fill: 'toself',
                fillcolor: 'rgba(102, 126, 234, 0.3)',
                line: {color: 'transparent'},
                showlegend: false
            };
            
            const layout = {
                title: 'Area tra ' + k.toFixed(1) + 'xÂ² e x + 2',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                margin: {t: 50, b: 50, l: 50, r: 50}
            };
            
            Plotly.newPlot('comparison-graph', [trace3, trace1, trace2], layout, {responsive: true});
        }

        function updateRiemannGraph() {
            const n = parseInt(document.getElementById('n-slider').value);
            document.getElementById('n-value').textContent = n;
            
            const a = 0;
            const b = 2;
            const dx = (b - a) / n;
            
            // Funzione
            const xCurve = [];
            const yCurve = [];
            for (let i = a; i <= b; i += 0.01) {
                xCurve.push(i);
                yCurve.push(i * i);
            }
            
            const trace1 = {
                x: xCurve,
                y: yCurve,
                mode: 'lines',
                name: 'y = xÂ²',
                line: {color: '#667eea', width: 3}
            };
            
            // Rettangoli
            const shapes = [];
            let riemannSum = 0;
            
            for (let i = 0; i < n; i++) {
                const x0 = a + i * dx;
                const x1 = a + (i + 1) * dx;
                const midpoint = (x0 + x1) / 2;
                const height = midpoint * midpoint;
                
                riemannSum += height * dx;
                
                shapes.push({
                    type: 'rect',
                    x0: x0,
                    y0: 0,
                    x1: x1,
                    y1: height,
                    fillcolor: 'rgba(245, 87, 108, 0.3)',
                    line: {color: '#f5576c', width: 1}
                });
            }
            
            const layout = {
                title: 'Somma di Riemann con ' + n + ' rettangoli',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                shapes: shapes,
                margin: {t: 50, b: 50, l: 50, r: 50}
            };
            
            Plotly.newPlot('riemann-graph', [trace1], layout, {responsive: true});
            
            const exactValue = 8/3;
            const error = Math.abs(riemannSum - exactValue);
            const errorPercent = (error / exactValue * 100).toFixed(2);
            
            document.getElementById('riemann-sum').innerHTML = 
                '<h3 style="color: white; margin-bottom: 15px;">Somma di Riemann</h3>' +
                '<p style="font-size: 18px;">Approssimazione: <strong>' + riemannSum.toFixed(4) + '</strong></p>' +
                '<p style="font-size: 18px;">Valore esatto: <strong>' + exactValue.toFixed(4) + '</strong></p>' +
                '<p style="font-size: 18px;">Errore: <strong>' + error.toFixed(4) + '</strong> (' + errorPercent + '%)</p>';
        }

        // Inizializza i grafici al caricamento della pagina
        window.addEventListener('load', function() {
            initInteractiveGraphs();
        });
    </script>
</body>
</html>
